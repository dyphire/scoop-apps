{
    "version": "4.2.3-172-g6cad8b535",
    "description": "A free single-player dungeon exploration Roguelike (Pre-release)",
    "homepage": "https://rephial.org/",
    "license": "GPL-2.0",
    "url": "https://github.com/angband/angband/releases/download/4.2.3-172-g6cad8b535/Angband-4.2.3-172-g6cad8b535-win.zip",
    "hash": "8fb91a7b0c75fafd3a6d57a1c11072b3b4c3a6bdf34b1c4fe5071f96bf888173",
    "extract_dir": "angband-4.2.3-172-g6cad8b535",
    "shortcuts": [
        [
            "angband.exe",
            "Angband\\Angband (Pre-release)"
        ],
        [
            "docs\\index.html",
            "Angband\\Angband Manual (Pre-release)"
        ]
    ],
    "persist": "lib\\user",
    "checkver": {
        "url": "https://github.com/angband/angband/releases",
        "regex": "Angband-(?<major>[\\d]+)\\.(?<minor>[\\d]+)\\.(?<patch>[\\d]+)-(?<build>[\\d]+)-g(?<commit>[\\da-z]+)-win\\.zip",
        "replace": "${major}.${minor}.${patch}-${build}-g${commit}"
    },
    "autoupdate": {
        "url": "https://github.com/angband/angband/releases/download/$version/Angband-$version-win.zip",
        "extract_dir": "angband-$version"
    },
    "post_install": [
        "'angband.INI' | ForEach-Object {",
        "    if (!(Test-Path \"$persist_dir\\$_.bak\")) {",
        "        New-Item -ItemType File \"$dir\\$_\" | Out-Null",
        "    } else {",
        "        Copy-Item \"$persist_dir\\$_.bak\" \"$dir\\$_\" -Force",
        "    }",
        "}"
    ],
    "uninstaller": {
        "script": [
            "'angband.INI' | ForEach-Object {",
            "    Copy-Item \"$dir\\$_\" \"$persist_dir\\$_.bak\" -Force",
            "}"
        ]
    },
    "notes": "Configuration files cannot be persisted, but will be retained during the update"
}
